---
title: 从模型中生成并配置你的应用程序
description: 了解模型的含义，以及如何从模型生成或配置应用程序的各个部分。
ms.custom: SEO-VS-2020
ms.date: 11/04/2016
ms.topic: conceptual
author: mgoertz-msft
ms.author: mgoertz
manager: jmartens
ms.technology: vs-ide-modeling
ms.workload:
- multiple
ms.openlocfilehash: 395bde5bd587195414b6bba41b818c9ad20441b40e325f2a69e3b935a7a94516
ms.sourcegitcommit: c72b2f603e1eb3a4157f00926df2e263831ea472
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/12/2021
ms.locfileid: "121356057"
---
# <a name="generate-and-configure-your-app-from-models"></a>从模型中生成并配置你的应用程序
你可从模型生成或配置你的应用程序的不同部件。

 模型比代码更能直接表示要求。 与更新代码相比，通过直接从模型派生应用程序的行为，你可以更加快速可靠地对更改的需求做出响应。 尽管需要做一些初始工作来设置派生，但如果你预计要求会发生改变，或者你计划生成产品的几个变体，则这种投资是会有回报的。

## <a name="generating-the-code-of-your-application-from-a-model"></a>从模型生成应用程序代码
 生成代码的最便捷方法是使用模板。 您可以在保存模型的同一 Visual Studio 解决方案中生成代码。 有关详细信息，请参阅：

- [使用 T4 文本模板生成设计时代码](../modeling/design-time-code-generation-by-using-t4-text-templates.md)

- [从域特定语言生成代码](../modeling/generating-code-from-a-domain-specific-language.md)

  这种方法易于进行增量应用。 首先使用一个仅适用于特定情况的应用程序，并从模型中选择一些你希望更改的应用程序部分。 重命名这些部分的源文件，以便这些文件成为文本模板 (.tt) 文件。 此时，将自动从模板文件生成 .cs 源文件，该应用程序能像以前一样工作。

  然后，你可以取用一部分代码并将其替换为文本模板表达式，该表达式读取模型并生成这部分的源文件。 至少模型的一个值应生成原始源，这样你才能再次运行该应用程序，该应用程序才能像以前一样工作。 在测试过不同的模型值之后，你可以继续在另一部分代码中插入模板表达式。

  这种递增方法意味着代码生成通常是一种低风险的方式。 生成的应用程序通常能执行与手写版本几乎一样的操作。

  但是，如果是从一个现有应用程序开始，你可能会发现需要进行很多重构才能隔开受模型控制的不同行为，以便这些行为可以独立改变。 建议你在估计项目成本时，将应用程序的这一方面评估在内。

## <a name="configuring-your-application-from-a-model"></a>从模型进配置应用程序
 如果你希望在运行时改变应用程序的行为，则无法使用在编译应用程序前生成源代码的代码生成。 相反，你可以将应用程序设计为读取模型，并相应地改变其行为。 有关详细信息，请参阅：

- [如何：在程序代码中从文件打开模型](../modeling/how-to-open-a-model-from-file-in-program-code.md)

  也可以以增量方式应用此方法，但一开始会有更多的工作要做。 你需要编写读取模型代码，并设置一个允许可变部分访问其值的框架。 生成泛型的可变部分比代码生成的开销更大。

  一个泛型应用程序的执行效果通常没有其特定的对应应用程序好。 如果性能很关键，则你的项目计划应将这种风险评估在内。

## <a name="developing-a-derived-application"></a>开发派生应用程序
 你可能会发现以下一般准则会很有帮助。

- **开始特定的，然后通用化。** 首先编写一个特定版本的应用程序。 此版本应能在一组条件下工作。 当你认为该应用程序能正常工作时，你可以从模型派生一些部分。 逐渐扩展派生的部分。

     例如，在设计用于显示在模型中定义的页的 web 应用程序之前，设计具有特定网页集的网站。

- **为变体方面建模。** 确定将发生改变的方面，两个不同部署之间的改变，或随着需求变化而改变。 这些方面应从模型派生。

     例如，如果网页和它们之间的链接集发生更改，但页面的样式和格式始终相同，则模型应描述链接，但不需要描述页面的格式。

- **分隔问题。** 如果可变方面能分成独立的区域，则为每个区域使用单独的模型。 使用 ModelBus，你可以定义同时影响各模型及其之间的约束的操作。

     例如，使用一个模型来定义网页之间的导航，并使用不同的模型来定义页面的布局。

- **建立需求而非解决方案的模型。** 设计模型，使其描述用户要求。 与此相反，不要根据实现的可变方面设计表示法。

     例如，web 导航模型应表示网页和它们之间的超链接。 Web 导航模型不应在应用程序中表示 HTML 或类的片段。

- **生成或解释？** 如果特定部署的需求将很少更改，则从模型生成程序代码。 如果需求可能会频繁更改，或者可能共存于同一部署的多个变体中，则编写应用程序，以便该应用程序可以读取和解释模型。

     例如，如果你使用网站模型来开发一系列不同且单独安装的网站，则应从模型生成该站点的代码。 但是，您可以使用您的模型来控制每天更改的站点，然后最好编写一个读取模型并相应地显示站点的 web 服务器。

- **UML 还是 DSL？** 考虑通过使用构造型扩展 UML 来创建你的建模表示法。 如果没有符合目标的 UML 关系图，则定义一个 DSL。 但要避免中断 UML 的标准语义。

     例如，UML 类图是框和箭头的集合；有了这种表示法，你在理论上能定义任何内容。 但是，除非你实际需要描述一组类型，否则我们不建议你使用类图。 例如，您可以修改类图来描述不同类型的网页。

## <a name="see-also"></a>另请参阅

- [从域特定语言生成代码](../modeling/generating-code-from-a-domain-specific-language.md)
- [如何：在程序代码中从文件打开模型](../modeling/how-to-open-a-model-from-file-in-program-code.md)
- [使用 T4 文本模板生成设计时代码](../modeling/design-time-code-generation-by-using-t4-text-templates.md)
