---
title: Visual Studio 的复合模式 |Microsoft Docs
description: 了解 Visual Studio 中的一致性的重要复合模式。 复合模式结合了交互和设计元素。
ms.custom: SEO-VS-2020
ms.date: 11/04/2016
ms.topic: reference
ms.assetid: e48ecfb2-f4b5-4d3a-b4a2-7a4d62fa4ec0
author: leslierichardson95
ms.author: lerich
manager: jmartens
ms.technology: vs-ide-sdk
ms.workload:
- vssdk
ms.openlocfilehash: c32ff32a0462d38cfae66dbc9ec5c2566f18b1fc
ms.sourcegitcommit: 68897da7d74c31ae1ebf5d47c7b5ddc9b108265b
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/13/2021
ms.locfileid: "122158159"
---
# <a name="composite-patterns-for-visual-studio"></a>Visual Studio 的复合模式
复合模式将交互和设计元素组合到不同的配置中。 有关一致性的 Visual Studio 中的一些最重要的组合模式包括：

- [数据可视化](../../extensibility/ux-guidelines/composite-patterns-for-visual-studio.md#BKMK_DataVisualization)

- [对象上的 UI 和扫视](../../extensibility/ux-guidelines/composite-patterns-for-visual-studio.md#BKMK_OnObjectUI)

- [选择模型](../../extensibility/ux-guidelines/composite-patterns-for-visual-studio.md#BKMK_SelectionModels)

- [持久性和保存设置](../../extensibility/ux-guidelines/composite-patterns-for-visual-studio.md#BKMK_PersistenceAndSavingSettings)

- [触摸输入](../../extensibility/ux-guidelines/composite-patterns-for-visual-studio.md#BKMK_TouchInput)

## <a name="data-visualization"></a><a name="BKMK_DataVisualization"></a> 数据可视化

### <a name="overview"></a>概述
 图表是聚合和可视化数据的一种直观方法，目的是为了增强决策。 它们可以帮助用户面对大量数据，但很少意味着需要注意哪些情况，以及可能需要采取措施。

 如果满足以下任一条件，则用户将受益于图表：

- 图表是否会帮助用户确定他们可以操作的任务？

- 此图表是否允许用户预测潜在更改的后果？

- 图表将帮助用户发现趋势并确定模式吗？

- 此图表是否允许用户做出更好的决策？

- 图表是否有助于回答用户在给定的上下文中可能会遇到的特定问题？

#### <a name="general-rules-for-charts"></a>图表一般规则

- 清楚地标记数据。 没有说明的插图只是一张图片。

- 从零开始轴以避免倾斜比例。 行长度和条形大小是了解数据点之间关系的重要视觉提示。

- 创建图表，而不是信息图。 信息图是数据的艺术表示形式，其主要目标是 visual 故事分享。 图表可以 (，并且应) 有吸引力，但会让数据对自己有吸引力。

- 避免 skeumorphism、图形条形图、对比度井号标记和其他信息图接触。

- 不要使用三维效果作为装饰元素。 仅当它们确实是用户理解信息的能力时才使用它们。

- 避免使用多行和填充，因为两种以上的颜色可以使此类图表难以正确读取和解释。

- 请勿使用图表 (或任何图) 作为理解概念或与数据进行交互的唯一方法。 这会给视力障碍的用户带来麻烦。

- 请勿在页面上使用图表作为免费或装饰元素。 换句话说，如果图表不会添加任何值，或者不能帮助用户解决问题，请不要使用它。

### <a name="chart-types"></a>图表类型
 Visual Studio 中使用的图表类型包括条形图、折线图、称为圆圈的已修改饼图或 "圆环图"、"圆环图"、"散点图" (也称为 "分类图" ) 和甘特图。 每种类型的图表都适用于传达不同类型的信息。

### <a name="other-charting-considerations"></a>其他图表注意事项

#### <a name="color"></a>颜色
 定义了图表颜色的特定调色板，以便在 Visual Studio 中使用。 可以访问调色板的主要类型色盲，即使使用的是颜色非常窄的切片，颜色也可以区分。 你可以在 UI 中的任何类型的图表或图形的任意组合中使用这些颜色。 如果不需要许多不同的颜色，则无需使用全部七种颜色。 这些颜色并未设计为与任何前景元素一起使用，因此不会将文本或标志符号放置在这些颜色的顶部。 这些色相应进行硬编码并公开给 " **工具" > 选项** 下的用户自定义 (请参阅 [公开最终用户) 的颜色](../../extensibility/ux-guidelines/colors-and-styling-for-visual-studio.md#BKMK_ExposingColorsForEndUsers) 。

|样本|Hex|RGB|
|------------|---------|---------|
|![样本 71B252](../../extensibility/ux-guidelines/media/0711_71b252.png "0711_71B252")|#71B252|113178，82|
|![样本 BF3F00](../../extensibility/ux-guidelines/media/0711_bf3f00.png "0711_BF3F00")|#BF3F00|191，63，0|
|![样本 FCB714](../../extensibility/ux-guidelines/media/0711_fcb714.png "0711_FCB714")|#FCB714|252183，20|
|![样本 903F8B](../../extensibility/ux-guidelines/media/0711_903f8b.png "0711_903F8B")|#903F8B|144，63139|
|![样本 117AD1](../../extensibility/ux-guidelines/media/0711_117ad1.png "0711_117AD1")|#117AD1|17122209|
|![样本 79D7F2](../../extensibility/ux-guidelines/media/0711_79d7f2.png "0711_79D7F2")|#79D7F2|121215242|
|![样本 B5B5B5](../../extensibility/ux-guidelines/media/0711_b5b5b5.png "0711_B5B5B5")|#B5B5B5|181181181|

## <a name="on-object-ui-and-peeking"></a><a name="BKMK_OnObjectUI"></a> 对象上的 UI 和扫视
 本部分提供了用于扫视的上下文（也称为代码查看视图），这是 Visual Studio 的唯一对象 UI 类型。

### <a name="overview"></a>概述

- 对象上的 UI 应为用户的主任务指定更多的信息或交互性，而无需 detracting。

- Visual Studio 中的对象 UI 的主要模式称为 "信息在注意"。

- Visual Studio 中的对象 UI 可以是内联的或浮动的，也可以是持久的或暂时性的。

  - 代码查看视图是 Visual Studio 中的一种对象上 UI，是内联的，是持久的。

  - CodeLens 是 Visual Studio 中的一种对象上 UI，是浮动的和暂时性的

  了解一段代码的工作原理或查找有关该代码的详细信息，通常要求开发人员切换上下文，然后转到其他内容或其他窗口。 这些上下文转移可能会造成中断，因为用户离开其主窗口时，可能会失去其原始任务的焦点。 而且，使原始上下文恢复起来可能很困难，尤其是在切换 windows 导致其原始代码被其他 UI 遮盖的情况下。

  对象上的 UI 遵循名为 "信息" 的问题。 这些消息、弹出窗口和对话框为用户添加了附加的相关信息，这些信息可添加澄清或交互性，而不会影响其主要任务。 对象上 UI 的示例包括在用户将指针悬停在通知区域中的图标时显示的弹出窗口、拼写错误的单词下的红色波形曲线和 Visual Studio 2013 中引入的 "速览" 视图。

### <a name="decision-points"></a>决策点
 在 Visual Studio 中，有几种方法可以在注意时使用此模式信息。 选择适当的机制并以一致且可预测的方式实现，这对于总体体验而言至关重要。 否则，用户可能会遇到令人困惑或不一致的体验，影响内容本身。

#### <a name="relationships-between-master-and-detail-content"></a>大纲和详细内容之间的关系
 需要注意的信息用于显示用户重点关注的内容之间的关系 ("主要" 内容) 以及 "详细信息" 内容)  (的其他相关内容。 在此模式下，详细信息内容与用户使用的内容有明显的关系，并可显示到与主内容接近的内容。 不能对主内容进行汇总的补充信息或信息应遵循其他模式，如工具窗口。

- **始终** 显示与主内容接近的详细内容。

- 请 **始终** 确保详细信息内容仍允许用户保持对主内容的关注。 通常，实现此目的的最佳方式是尽可能将详细信息内容呈现到主内容。 为此，可以在主内容旁的弹出窗口中呈现详细信息内容，也可以通过在主内容下方以内联方式呈现详细信息内容来完成。

- **永远不要** 使用信息来使用户离开主内容。 如果用户需要单独查看详细信息内容，则会公开显式操作，使用户能够执行此操作。

#### <a name="design-details"></a>设计详细信息
 确定对象上 UI 是正确选择后，有四个主要设计注意事项：

1. **持久性：** 内容是持久的还是暂时性的？
   用户是否希望使信息保持可见以引用或与之交互？ 或者，用户是否希望快速浏览信息，然后继续执行其主要任务？

2. **内容类型：** 内容是信息性、可操作性还是导航性？
   用户是否需要有关主内容的其他详细信息？ 用户是否需要完成影响主内容的任务？ 或者，用户是否需要定向到另一个资源？

3. **指示器类型：** 环境指示器是否有意义？
   信息能否以有用的方式进行汇总和显示，而不会使主内容占上用场？

4. **手势：** 将使用哪些手势来调用和关闭 UI？
   用户如何显示并发送详细信息内容？ 添加手势（如固定）以在暂时性状态和持久状态之间切换是否有价值？

   这四个决策点的每一个都将对对象上 UI 的主要组件产生影响。

### <a name="on-object-ui-components"></a>对象上 UI 组件

1. 容器 (内容演示) 类型

    - 浮动

    - 内联

2. 内容类型

    - 信息性：可能是静态或动态的数据

    - 可操作：更改主内容的命令

    - 导航：将用户指向其他窗口或应用程序（如 MSDN）的链接

3. 笔势

    - 调用

    - 解雇

    - 固定

    - 其他交互

4. 持久性和提交模型

    - 暂时性

    - Durable

    - 自动

    - 按需

5. 环境指示器 (可选) 

    - 长线下划线

    - 智能标记图标

    - 其他环境指示器

#### <a name="container-content-presenter-type"></a>容器 (内容演示) 类型
 有两个主要选项可用于在关注点呈现内容：

1. **内联：** 内联演示器（如代码编辑器中引入的Visual Studio 2013视图）通过移动现有内容来为新内容提供空间。

    - **如果希望** 用户花费大量时间来引用你呈现的内容或与之交互，则首选内联演示者。

    - **如果希望** 用户想要速览你呈现的信息，请避免使用内联演示者，然后在尽量减少中断的情况下继续执行其主要任务。

2. **浮动** ：浮动演示器尽可能靠近所选内容，但不更改现有内容的布局。 可以使用各种策略，例如，在所选符号的最近可用空白上显示浮动内容面板。

    - **如果希望** 用户想要速览你呈现的信息，然后以最少的中断继续执行其主要任务，则首选浮动演示者。

    - **如果希望** 用户花费大量时间来引用你呈现的内容或与之交互，请避免浮动演示者。

#### <a name="content-type"></a>内容类型
 可以在任何对象上的 UI 容器中显示三种主要类型的内容。 可以显示这些类型信息的任意组合。 这三种类型是：

1. **信息性** ：大多数对象上的 UI 容器将显示某种信息性内容。 内容可以表示有关环境当前状态的信息，也可以表示有关环境未来状态的信息。 例如，它可用于显示特定命令（如重构）对现有代码的影响。

    - **始终** 使用所显示信息的规范表示形式。 例如，代码应如代码一样，完成语法突出显示，并且应遵守用户设置的任何字体和其他环境设置。

    - **始终** 考虑支持对信息性内容执行的任何操作，如果该信息作为主内容显示，则这些操作可能可行。 例如，如果在对象上的 UI 容器中显示现有代码，强烈建议支持浏览和修改该代码。

    - **如果** 呈现的信息性内容表示潜在的未来状态，请始终考虑使用不同的背景色。

2. 可操作：某些对象上的 UI 容器将提供对主内容执行某些操作（例如执行重构操作）的能力。

    - **始终** 将可操作的命令与信息性内容分开放置。

    - **请** 始终在适当的时候启用和禁用操作。

    - **请** 始终参考标准准则来表示对话框中的命令。

    - **始终** 将对象上 UI 容器中公开的操作数保持在绝对最小值。 与对象上的 UI 交互应该是一种轻量、快速的体验。 用户不应花费精力管理对象上的 UI 容器本身。

    - **请** 始终考虑如何以及何时关闭或关闭对象上的 UI 容器。 最佳做法是，在调用该操作时，结束母版内容与详细信息内容对话的任何操作也应关闭对象上 UI 容器。

3. **导航：** 一些对象上 UI 容器包含将用户指向其他窗口或应用程序的链接，例如，在用户的 Web 浏览器中打开 MSDN 文章。

    - **始终** 在导航链接前加"打开"，以便用户不会因导航到其他内容而感到意外。

    - **始终** 将导航链接与可操作链接分开。

#### <a name="ambient-indicators-optional"></a>环境指示器 (可选) 
 环境指示器可能很细微，包括以与代码其余部分相反的颜色显示的文本，或明显的文本，包括刻度线符号（如长线下划线和智能标记图标）。 环境指示器传达其他相关信息的可用性。 理想情况下，即使不需要用户与之交互，它们也提供有用的信息。

- **始终** 放置环境指示器，以便它不会分散用户注意力或使用户感到重负。 如果无法以这种方式定位环境指示器，请考虑另一种解决方案。

- **始终** 将环境指示器尽可能靠近其相关内容。

- **始终** 尝试创建一个指示器，用于汇总它提供的信息。 请考虑提供可用数据项 (例如"3 个引用"，而不是简单地"引用") 或考虑使用其他某种方法汇总数据。

  - 如果无法始终计算和显示指示器的数据，则立即考虑在计算值时提供渐进式反馈。 例如，请考虑对反映可用数据更新的更改进行动画处理，类似于当未读电子邮件数增加时，Windows Phone动态磁贴刷新的方式。

- **切勿** 添加比用户为给定内容段合理接受的指示器更多的指示器。 环境指示器应该很有用，无需用户的任何交互。 如果指示器需要溢出和其他管理控制来查看它们，这些指示器将失去其语态。

#### <a name="gestures"></a>笔势
 允许用户保持对主内容的关注的一个重要方面是支持正确的手势来打开和关闭其他详细信息内容。

- **始终** 要求用户执行一些显式手势来打开其他内容。 常见的打开手势包括：

  - **悬停** ：工具提示或非交互式信息性内容

  - **显式命令：** 内联演示者

  - **双击环境指示器：** CodeLens 弹出窗口

- **每当** 用户按 Esc 键时，始终关闭详细信息内容。

- **始终** 考虑对象上 UI 的上下文。 对于允许在容器中交互的内容演示者，请仔细考虑是否显示悬停的其他信息，这可能会干扰用户的工作流。

- **切勿** 在鼠标悬停时显示看似可编辑或邀请用户交互的内容。 如果用户尝试将光标移到详细信息内容上，则此行为可能会使用户很生头，因为工具提示的标准行为是当光标不再位于生成工具提示的主内容上时立即消除。

## <a name="selection-models"></a><a name="BKMK_SelectionModels"></a> 选择模型

### <a name="overview"></a>概述
 选择模型是一种机制，用于指示并确认对用户界面中一个或多个感兴趣的对象的操作。 本主题讨论文档编辑器中的选择Visual Studio模式：文本编辑器、设计图面和建模图面。

 用户必须有一种方法来指示 Visual Studio 他们的工作内容，Visual Studio 必须向用户提供有关其运行内容的反馈。 用户与用户界面之间的差异或畅可能导致用户不会注意到操作，这可能会产生意想不到的后果。 通常情况下，错误会被忽略，直到用户发现某些内容丢失或更改。 因此，选择模型是最关键的用户界面设计部分之一。 尽管 Visual Studio 中的选择模型与 Windows 一致，但却有些变化。

 在 Visual Studio 中，与 Windows 一样，选择模型因发生交互的上下文而异。 可以在四种类型的对象中进行选择：

- 文本

- 图形对象

- 列表和树

- 网格

  在这些对象中，有三种类型的选择：

- 系列

- 相互

- 区域

#### <a name="scope"></a>范围
 最重要的选择组件是确保用户知道他们在哪个窗口中工作 (激活) 并将焦点置于 (选择) 。 Visual Studio 扩展了 Windows 中的窗口管理功能，但激活方案相同：与窗口交互会将焦点放在窗口中。 Visual Studio 有两个用于激活的指示器：一个用于文档窗口，一个用于工具窗口。

 对于文档窗口，活动窗口由一个文档窗口选项卡指示，并更改其背景色：

 ![Visual Studio 中的“活动”选项卡选择](../../extensibility/ux-guidelines/media/0713-01_activetab.png "0713-01_ActiveTab")

 **活动选项卡选择**

 对于工具窗口，活动窗口的显示方式为工具窗口标题栏区域的颜色更改：

 ![Visual Studio 中的”活动”工具窗口选择](../../extensibility/ux-guidelines/media/0713-02_activetoolwindow.png "0713-02_ActiveToolWindow")

 **显示节点的主要选择的活动工具窗口**

 ![Visual Studio 中的”非活动”工具窗口选择](../../extensibility/ux-guidelines/media/0713-03_inactivetoolwindow.png "0713-03_InactiveToolWindow")

 **显示延迟的节点选择的非活动工具窗口**

 窗口处于活动状态后，将根据指导原则的此部分中所述的选择模型来指示其焦点。

#### <a name="context"></a>上下文
 Visual Studio 旨在保持上下文的强大概念，同时跟踪用户的工作位置。 只有一个窗口处于活动状态，无论该窗口是工具窗口还是文档窗口。 但是，最顶部的文档窗口始终保留潜在的选择。 尽管焦点可能位于工具窗口中，但最后一个活动的文档窗口也会显示选定内容，即使处于非活动状态也是如此。 这样做是为了在他们正在编辑的文档中保留用户的上下文，并显示 Visual Studio 已保留其状态，以便它们能够在工具窗口和文档窗口之间无缝返回和切换。

### <a name="text-selection"></a>文本选择
 严格采用文本形式的 Visual Studio 编辑器（如内置文本编辑器）使用 MSDN 上 Windows 用户体验交互指南的 "[鼠标和指针](/windows/desktop/uxguide/inter-mouse)" 页中所述的相同文本选择模型和外观。 文本编辑器中的输入焦点由称为插入点的竖线指示。 插入点为一个像素，并着色为它后面显示的任何内容。 它根据 "控制面板" 中 "**键盘**" 小程序的 "**速度**" 选项卡中 "**游标闪烁速率**" 设置的速率闪烁。

#### <a name="contiguous-and-disjoint-selection"></a>连续和非连续选择
 文本编辑器中的选择仅是连续的。 不允许不连续的文本选择，但应在图形对象编辑器中解决。 当用户的鼠标指针位于文本区域时，光标将更改为 I 型。 单击一次即可将插入点放置在文本编辑器中的单击位置。 按住鼠标按钮会启动选择突出显示，然后松开鼠标按钮将结束选择突出显示。

#### <a name="region-selection-box-selection"></a>选择区域 () 选择
 Visual Studio 支持在文本编辑器中选择区域，这称为框选择。 框选择允许用户选择不在常规文本流之后的文本区域。 与标准文本选择一样，选择必须是连续的。 通过在用鼠标拖动时按住 Alt 键来启动框选择。 还可以通过在使用箭头键指示所选区域的同时按住 Alt 和 Shift 键来启动框选择。 框选择使用正常选择突出显示，并显示插入点光标在选择区域结束时的闪烁。

 ![区域 &#40;框在 Visual Studio 中&#41; 选择](../../extensibility/ux-guidelines/media/0713-04_boxselection.png "0713-04_BoxSelection")

 **区域 (框中) 选择 Visual Studio**

#### <a name="text-selection-appearance"></a>文本选择外观
 可以自定义在编辑器中用于活动和非活动选择的颜色。 若要自定义编辑器的视觉外观，用户可以 **> 选项** 中转到 "工具"，然后在 " **环境" > "字体和颜色" > 文本编辑器**"下查看。

### <a name="graphical-selection"></a>图形选择

#### <a name="interaction"></a>交互
 图形对象选择可能很复杂，具体取决于多个因素：

- **编辑器的主选择模型。** 包含图形对象的编辑器还可以用于编辑文本或网格。 例如，编辑器可能是基于文本的编辑器，还支持图形对象（如 Visual Studio XAML 设计器）的位置。 支持多个对象类型可能会影响用户选择由不同类型的对象组成的组的方式。

- **支持主要和次要选择状态。** 编辑器可以提供主选择状态和辅助选择状态，以便可以统一、彼此对齐、调整对象大小等来编辑对象。

- **就地编辑支持。** 编辑器还可以允许编辑其图形对象的内容。 例如，矩形形状还可能在可由用户更改的内部包含文本。 此外，该文本可以居中或两端对齐。 就地编辑涉及更详细的用户交互级别，因此需要一组适当的视觉提示来向用户展示状态信息。

#### <a name="mouse-interaction"></a>鼠标交互

|输入|结果|
|-----------|------------|
|单击未选定的对象|如果对象可调整大小，则选择对象并显示虚线和选择控点。|
|单击所选对象|如果对象支持，则激活就地编辑。 单击对象外部将停用就地编辑模式。|
|双击对象|打开要编辑的对象的代码，并根据需要插入默认事件处理程序。|
|指向对象|将指针更改为移动光标。 对象的外观（如其发光度或颜色）可能会更改。|
|指向选择句柄|将指针更改为大小调整光标。 对于支持旋转的对象，当指针定位在不同的位置时，某些选择控点可能会将指针更改为旋转光标 (例如，与选择控点相对) 。|
|拖动|即使之前没有选择对象，也会将指针更改为移动光标并移动对象。|
|编辑器失去焦点|停用就地编辑模式，尽管对象会保留其在上一个操作/选择状态中所具有的内容和外观。|
|对象选择|由边框、点线或其他直观不同处理指示，以突出显示对象的边界。|
|调整所选对象的大小|由选择句柄指示。<br /><br /> 可调整大小的对象具有八个句柄，表示可调整其大小的每个方向。 如果只能在某些方向调整对象的大小，则可以使用较少的句柄。 如果用户将对象大小减小到八个句柄不是交互的位置，则可以使用四个句柄。 句柄大小应与窗口边框和边缘指标绑定， **GetSystemMetrics** API 函数与显示分辨率成比例。<br /><br /> ![重设句柄大小](../../extensibility/ux-guidelines/media/0713-05_resizehandles.png "0713-05_ResizeHandles")|
|旋转所选对象|![旋转句柄](../../extensibility/ux-guidelines/media/0713-06_rotate.png "0713-06_Rotate")|

#### <a name="keyboard-interaction"></a>键盘交互

|输入|结果|
|-----------|------------|
|选项卡|在编辑器中对象的逻辑顺序之间移动焦点指示器。 这可能是从左到右或从上到下，具体取决于 **TabIndex** (或等效的) 属性值、对象创建顺序以及编辑器的总体用途。 Shift+Tab 可反转焦点指示器的方向。|
|空格键|在维护击键时激活平移模式。 平移视区位置需要额外的鼠标输入。|
|Ctrl+空格键|在维护击键时激活缩放模式。 需要其他鼠标输入来增加和减少缩放因子。|
|Ctrl+Alt+减号|将缩放因子减小一个级别。|
|Ctrl+Alt+加号|将缩放因子增加一个级别。|
|Shift OR Ctrl|将 对象添加到选择组。 Ctrl 还允许从选择组单独删除对象。|
|Enter|对对象执行默认命令， (打开或编辑) 。|
|F2|激活对象的就地编辑。|
|箭头键|将所选 () 按箭头键的方向移动，以较小的增量 (例如，每次按 1 像素) |
|Ctrl+箭头键|将所选 () 按箭头键的方向移动，以更大的增量 (例如，一次按 10 像素) |
|Shift+箭头键|按相应 () 调整所选对象的大小， (以较小的增量（例如，一次 1 像素) |
|Ctrl+Shift+箭头键|按相应的 () 调整所选对象的大小，以更大的增量 (例如，一次 10 像素) |

 当用户就地编辑控件时，使用用户输入自动调整对象大小可能有意义。 例如，如果用户编辑标签控件，则标签应增长以显示用户刚刚键入的文本。 如果此操作未完成，用户必须在编辑文本后手动调整控件的大小。 如果用户具有许多控件，则这将成为一个不工作的任务。

#### <a name="graphical-containers"></a>图形容器
 在某些情况下，图形编辑器为其他图形对象（例如，Windows窗体面板控件或 HTML 设计器中的网格布局控件）提供容器。 如果编辑器为其他图形对象提供容器，则以下选择模型只应用于容器中 (对象遵循上述标准模型) ：

|输入|结果|
|-----------|------------|
|单击容器|选择容器对象，而不直接选择任何包含的对象。 可以移动和/或调整容器的大小，使用标准鼠标和键盘输入 (如上文所述) 。 包含的对象相对于容器移动，但包含的对象不会调整大小，除非也直接选择它们。|
|将鼠标悬停在容器的边界区域上|将鼠标转换为移动光标，指示可以移动容器。|
|拖动容器的边界区域|将鼠标更改到移动光标，并移动容器 (和对象中包含的) 。 如果不首先通过单击选择容器，则不能移动容器。|
|单击容器中的对象|如果选择了" (，则取消) ，并仅选择单击的对象。|
|Shift+单击或 Ctrl+单击包含的对象和/或容器|将单击的对象添加到现有选择或选择组。 如果单击的对象已经是选择组的成员，则从选择组中删除该对象。|

 包含的对象应遵循上一部分中所述的基本选择模型。 从窗体设计器的可用性Windows，用户预期能够无缝访问包含的对象，而无需 (对象所施加的干预) 。

#### <a name="disjoint-and-region-selections"></a>不一一并的区域选择
 图形对象编辑器应支持不一起选择。 请注意，此图未显示控件控件Visual Studio。 有关 [详细的视觉规范，](../../extensibility/ux-guidelines/composite-patterns-for-visual-studio.md#BKMK_GraphicalObjectSelectionAppearance) 请参阅图形对象选择外观。

 ![非连续选择器和区域选择器](../../extensibility/ux-guidelines/media/0713-07_disjointregionselectors.png "0713-07_DisjointRegionSelectors")

 **不一起选择**

 图形编辑器还应使用 marquee 类型选择指示器提供区域选择。 如果图形编辑器支持其他对象类型 (如文本) ，则可能无法选择区域，具体取决于这些其他对象类型的约束。

 ![字幕选择](../../extensibility/ux-guidelines/media/0713-08_marqueeselection.png "0713-08_MarqueeSelection")

 **字幕选择**

#### <a name="primary-and-secondary-selections"></a>主要和辅助选择
 某些图形对象编辑器允许用户在组中编辑或对齐对象。 在这种情况下，需要引入主要选择和辅助选择的概念。 主要选择是所有其他对象响应组操作的对象。 用户首先选择的对象将成为主控件，后续选择将成为辅助选择。 主要选择具有与辅助选择对象不同的视觉 (，) 指示哪个对象是主要对象：

 ![主要和次要选择](../../extensibility/ux-guidelines/media/0713-09_primarysecondary.png "0713-09_PrimarySecondary")

 **具有两个辅助选择的主要选择**

#### <a name="graphical-object-selection-appearance"></a><a name="BKMK_GraphicalObjectSelectionAppearance"></a> 图形对象选择外观
 选择句柄是围绕对象的边界框以矩形模式绘制的正方形。 下图显示了图形对象可以具有的各种状态的示例，这些状态具有句柄、大小调整和就地编辑外观。 句柄的大小应绑定到使用 **GetSystemMetrics** API 的窗口边框和边缘指标。

| 状态 | 外观 | 视觉对象详细信息 |
|-------------------------|---------------| - |
| **未选定** | 默认 | ![默认按钮状态](../../extensibility/ux-guidelines/media/0713-10_defaultstate.png "0713-10_DefaultState") |
| **主要选择** | 可调整大小 | ![具有重设大小句柄的主要选择](../../extensibility/ux-guidelines/media/0713-11_primaryresize.png "0713-11_PrimaryResize") |
| **主要选择** | 不可调整大小 | ![没有重设大小句柄的主要选择](../../extensibility/ux-guidelines/media/0713-13_primarynoresize.png "0713-13_PrimaryNoResize") |
| **主要选择** | 已锁定 | ![锁定的主要选择](../../extensibility/ux-guidelines/media/0713-15_primarylocked.png "0713-15_PrimaryLocked") |
| **辅助选择** | 可调整大小 | ![具有重设大小句柄的次要选择](../../extensibility/ux-guidelines/media/0713-17_secondaryresize.png "0713-17_SecondaryResize") |
| **辅助选择** | 不可调整大小 | ![没有重设大小句柄的次要选择](../../extensibility/ux-guidelines/media/0713-19_secondarynoresize.png "0713-19_SecondaryNoResize") |
| **辅助选择** | 已锁定 | ![锁定的次要选择](../../extensibility/ux-guidelines/media/0713-21_secondarylocked.png "0713-21_SecondaryLocked") |
| **UI 活动** | 默认 | ![UI 活动状态](../../extensibility/ux-guidelines/media/0713-23_uiactive.png "0713-23_UIActive") |

### <a name="view-selection-models"></a>查看选择模型

#### <a name="tree-view"></a>树视图
 树视图中的选择以简单的突出显示显示。 如果用户单击节点名称或节点图标，则节点将被选中。 节点左侧的三角形字形展开或收缩树控件，但不会影响用户的选择，但有一个例外：在折叠父节点时，当所选内容位于该节点的子节点上时，选择将移至父节点。

 ![Visual Studio 中的典型树视图](../../extensibility/ux-guidelines/media/0713-25_treeview.png "0713-25_TreeView")

 **Visual Studio 中的典型树视图**

 树视图可以支持连续和不连续选择，即使跨树中的多个级别。 必须在可见树节点上进行连续或不连续的多个选择。 如果节点已折叠，则不活动选择将丢失，而折叠的节点将获取所选内容。 这样，用户就可以查看受操作影响的节点。 当节点折叠时，不确定哪些节点可能会受到影响。

 选择父节点后，操作应应用于父节点，但在某些情况下，将操作应用于父节点及其所有子节点可能有意义。 在这种情况下，请在操作过程中提供其他 UI，例如复选框或确认对话框，以向用户显式显示"应用于所有子项"选项。

##### <a name="renaming"></a>重命名
 如果树中的节点支持重命名，则重命名应就地完成。 就地操作应是中所有树控件的标准Visual Studio。 提供立即激活就地编辑模式的重命名命令，文本选择涵盖节点的整个名称，已准备好接受用户输入。 如果节点表示文件，则文件名应包含扩展名。 选择突出显示应只包含文件名的正文，而不应包含扩展名。

|输入|结果|
|-----------|------------|
|Enter 键|提交重命名操作|
|Esc 键|取消重命名操作|
|单击就地编辑区域外部|提交重命名操作|
|撤消|提供轻松撤消以取消重命名操作|

#### <a name="selection-within-lists-and-grid-controls"></a>列表和网格控件中的选择
 列表选择中的关键概念是它是基于行的，这意味着当进行选择时，将选择整个行作为一个单元。 相比之下，网格可以允许选择特定单元格，而不会影响行的其他任何方面。 网格可能还包含嵌套行的层次结构 (例如 TreeGrid) ，该层次结构允许通过与父行交互来选择和取消选择层次结构的整个分支。 列表的选择由整个数据行上的简单突出显示颜色显示。 如果所有单元格都是只读的，则焦点由当前可编辑行或行 (的单个像素虚线边框) 。

> [!NOTE]
> **焦点****和选择** 是不同的概念。 *焦点* 指示哪个 UI 元素接收未显式定向到另一个对象的输入，而选择是指对象包含在一组对象中的状态，后续操作可能会发生。

 列表的选择可能是连续的、不连续的或区域。 如果允许多个选择，应始终支持连续和不连续选择，而支持区域选择 (框) 可选。 区域选择通过拖动列表正文的空白区域来启动。

| 对象 | 选择 |
|--------|------------|
| 列出 | 连续 |
| 列出 | 不一起 |
| 列出 | 区域 |

 单击列表一次会选择单击的行。 如果用户碰巧单击支持就地编辑的列表单元格，则也会立即激活该单元格进行就地编辑。 否则，将立即选择整个行，并突出显示。

 在列表正文中拖动可进行以下三项操作之一：

- 如果列表支持区域选择，并且鼠标下拉位于空白区域，则启动区域选择

- 如果列表单元格或行支持作为拖动源，则启动拖放操作

- 选择当前行

##### <a name="in-place-editing"></a>就地编辑
 允许就地编辑时，有两个基本模型：简单编辑控件和属性选取器。 使用简单的编辑控件，一旦激活就地编辑，内容就会突出显示并可供用户输入。 实现属性选取器时，一旦激活就地编辑模式，就地显示调用属性选取器按钮，并且不会突出显示当前选择。 选取器按钮应在单元格中右对齐。 有关就地编辑示例，请参阅属性 **窗口** 和任务列表Visual Studio。 

##### <a name="keyboard-support"></a>键盘支持
 在列表和网格中对选择的键盘支持遵循标准Windows约定：

- 箭头键在列表中导航，在移动焦点时选择每个行/单元格。

- Shift + 箭头按箭头键的方向执行连续选择。

- Ctrl + 箭头后跟空格键，可在从所选内容中添加和删除列表项之间进行切换，从而创建不相互的选定内容。

- 对于包含嵌套层次结构的网格，向右键展开父行，向左键折叠一行。

- 如果单元格可编辑，则 Tab 键在当前行中的单元格之间移动焦点。

- Enter 键对列表中的项执行默认命令， (**打开) 。**

- F2 键激活当前所选单元格的就地编辑。

## <a name="persistence-and-saving-settings"></a><a name="BKMK_PersistenceAndSavingSettings"></a> 持久性和保存设置

### <a name="overview"></a>概述
 尽管每个软件组件Visual Studio负责自身的状态和持久性，但Visual Studio自动保存设置，例如窗口大小和位置。 下表是自动保存的设置和需要执行显式用户或编程操作的设置的组合。

|对象|要保存哪些|何时保存|保存位置|
|------------|------------------|------------------|-------------------|
|可选择的对象 (例如，一行代码) |代码行上的断点<br /><br /> 与代码行关联的用户快捷方式|保存项目时|**项目的用户 (.suo)** 文件|
|对话框|对话框的位置（如果已移动）<br /><br /> 用户上次在对话框中使用的视图|对话框关闭时<br /><br /> 会话Visual Studio结束时|内存中<br /><br /> 注册表 **HKEY_Current_User**|
|窗口|窗口的大小和位置|当窗口关闭时<br /><br /> 当 Visual Studio 模式发生更改时<br /><br /> Visual Studio 会话结束时|项目的 **用户选项 ( .suo)** 文件<br /><br /> 用于窗口设置的自定义选项文件|
|文档|文档中的当前选定内容<br /><br /> 文档视图<br /><br /> 用户访问的最后几个位置|保存文档时|项目的 **用户选项 ( .suo)** 文件|
|Project|文件引用<br /><br /> 对磁盘上的目录的引用<br /><br /> 对其他软件的引用<br /><br /> 组件<br /><br /> 有关项目本身的状态信息|保存项目时|项目文件|
|解决方案|对项目的引用<br /><br /> 文件引用|保存项目或解决方案时|**解决方案 ( .sln)** 文件|
|**工具 > 选项** 中的设置|键盘自定义<br /><br /> 工具栏自定义<br /><br /> 配色方案|当 " **工具 > 选项** " 对话框关闭时<br /><br /> Visual Studio 会话结束时|**HKEY_Current_User** 中的注册表|

 用户正在执行的操作，决定是在会话期间 (将某个设置保存到内存中，还是在) 会话中将其保存到磁盘上 () ，作为项目或解决方案文件本身的一部分，作为解决方案选项的一部分，作为 **解决方案选项 (** 文件的一部分，或作为只有该软件组件了解的自定义设置文件。 上表显示了几个可用于保存设置的事件。 但是，有时您可能需要保存状态：

- 当用户更改对话框或窗口中的位置时

- 当用户将焦点转移到另一个窗口时

- 当用户从 "设计" 切换到 "调试" 模式时

- 当用户注销其帐户时

- 计算机进入休眠或关闭状态时

- 当要重新格式化计算机/硬盘驱动器并再次进行设置时

### <a name="window-configurations"></a>窗口配置
 "窗口配置" 是开发环境的基本表示形式，它是一个方案，其中包含工具窗口的列表以及它们的排列方式。 对于 IDE 管理的 windows (IDE windows) ，每个用户都将保留布局信息，因此当用户启动 IDE 时，窗口布局的显示方式与上次退出 Visual Studio 时相同。 IDE 窗口的状态和位置以 XML 格式保存在自定义选项文件中。 加载到 IDE 中的包所创建的工具窗口会将其状态信息保存在注册表中，并且每个用户可能具有也可能不存在。

#### <a name="profile-specific-layouts"></a>特定于配置文件的布局
 每个配置文件都包含工具窗口布局，以特定的开发人员角色所熟悉的方式进行组织 (Visual C++ 开发人员希望在 IDE 左侧看到 **解决方案资源管理器** ，而 c # 开发人员希望看到右侧) 的 **解决方案资源管理器** 。 配置文件特定的窗口布局会在用户启动时选择配置文件后加载。 包作者应确定最适合其客户体验的窗口布局，知道用户对窗口配置所做的更改随后会被保留。

## <a name="touch-input"></a><a name="BKMK_TouchInput"></a> 触摸输入
 用户越来越多地在触控设备上使用 Microsoft 开发产品。 但存在一些障碍，使得难以使用触控设备上的开发工具。 用户将希望我们的产品提供可靠且精确的触摸体验。 这些指导原则旨在通知有关合并哪些触摸功能，并鼓励跨 Visual Studio 和相关产品的一致触摸体验的决策。

### <a name="levels-of-experience"></a>经验级别
 以下经验级别旨在作为指导，帮助团队根据其所需的触控投资水平来确定要提供哪些触摸功能。

- **基本体验** 适用于希望提供触摸功能的团队，使其不会在工作中停止。

- **优化体验** 适用于想要提供最常见触摸功能的团队 (例如，internet 浏览器应用程序中通常提供的那些功能) 。

- **提升的体验** 适用于想要添加功能（如手势或其他可选功能）的团队，这些功能可使应用程序接触优先。

||基本体验|优化的体验|提升的体验|
|-|----------------------|--------------------------|-------------------------|
|**允许用户 .。。**|修复代码和解决方案/项目级别的读取而不停止结束|执行维护、重构和导航任务|自信地以一致、直观且流畅的方式运行|
|**编辑器**|触摸平移和选择<br /><br /> 用于跳转并按 + 拖动的滚动条|挤压缩放<br /><br /> 快速滚动<br /><br /> 选择<br /><br /> 上下文菜单的简单使用||
|**顶部工具窗口**|列表平移<br /><br /> 项选择<br /><br /> 用于跳转并按 + 拖动的滚动条|轻松地滚动和选择项目||
|**窗口化**||重设窗口大小<br /><br /> 快速访问||
|**记录良好**||在打开的文件之间轻松导航||
|**笔势**||确保常见手势跨 IDE 工作|基于手势的操作<br /><br /> 支持拖放和设计器|
|**其他注意事项**|||自定义屏幕键盘|

#### <a name="gestures"></a>笔势
 手势为用户提供了可能需要更复杂的交互的命令的快捷方式。 请参阅[适用于桌面应用程序常见触摸笔势](/windows/desktop/wintouch/windows-touch-gestures-overview)的 Windows 指导原则，并遵循本指南进行大多数手势，包括平移和缩放等简单手势。
