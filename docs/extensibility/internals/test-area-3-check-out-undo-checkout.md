---
title: 测试区域 3：检查Out-Undo结帐|Microsoft Docs
description: 此源代码管理插件测试区域介绍如何使用签出和撤消签出命令编辑和还原版本存储中的项。
ms.custom: SEO-VS-2020
ms.date: 11/04/2016
ms.topic: conceptual
helpviewer_keywords:
- source control plug-ins, checkout
- source control plug-ins, undo checkout
- source control [Visual Studio SDK], checking out
- source control [Visual Studio SDK], undo checkout
ms.assetid: ce00c5a5-d472-4f45-8776-d77a1fbe9d37
author: leslierichardson95
ms.author: lerich
manager: jmartens
ms.technology: vs-ide-sdk
ms.workload:
- vssdk
ms.openlocfilehash: 6605d60d44e676b9e9a24025ccc03f18d3305d8827d4c10e440e4cfd097f773b
ms.sourcegitcommit: c72b2f603e1eb3a4157f00926df2e263831ea472
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/12/2021
ms.locfileid: "121431833"
---
# <a name="test-area-3-check-outundo-checkout"></a>测试区域 3：签出/撤消签出
此源代码管理插件测试区域介绍如何通过"签出"和"撤消签出"命令编辑和还原版本存储 **中的** 项。

**签出**：将版本存储中的项标记为签出，将本地副本修改为读/写。

**撤消签出**：将版本存储中的项标记为已签入，在签出之前将本地副本还原为 (，具体取决于) 。

## <a name="command-menu-access"></a>命令菜单访问

以下 [!INCLUDE[vsprvs](../../code-quality/includes/vsprvs_md.md)] 集成开发环境菜单路径用于测试用例。

##### <a name="check-out"></a>签出：

- **文件****、源代码管理****、签出**。

- **文件**， **签出**。

- 快捷菜单， **签出**。

- 撤消签出：**文件**、**源代码管理、****撤消签出**。

## <a name="common-expected-behavior"></a>常见预期行为

- 执行签出操作后，目标 (和) 和/或文件夹 (在) 存储中标记为已签出。

- 版本存储将签出属性属性给正确的用户。

- 根据用户的设置设置， (的签出时间和日期) 。

## <a name="test-cases"></a>测试用例

下面是"签出/撤消签出"测试区域的特定测试用例。

### <a name="case-3a-check-out"></a>案例 3a：签出

本部分重点介绍签出命令的操作。

|操作|测试步骤|要验证的预期结果|
|------------|----------------|--------------------------------|
|查看客户端 (COE) 独占|1.创建客户端项目。<br />2.将解决方案添加到源代码管理。<br />3.以独占方式查看整个项目， (**文件**，**签出) 。**|签出发生。|
|查看文件系统 () 本地 IIS Web 项目的独占 COE|1.在"工具"、"选项"、"项目"和"Web 服务器"**中将****Web 服务器设置。** <br />2.创建 Web 项目。<br />3.将解决方案添加到源代码管理。<br />4.以独占方式查看整个 (**文件**、**源代码管理**、签出 **) 。**|签出发生。|
|查看解决方案中的解决方案项 (新的方法来处理其他文件) |1.创建空白解决方案。<br />2.将解决方案添加到源代码管理。<br />3.查看解决方案。<br />4.添加多个解决方案项。<br />5.签入所有新添加的项。<br />6.选择多个解决方案项。<br />7.在快捷菜单中查看 (项，**并选中) 。**|已签出所选文件。|
|如果受测 (插件支持此功能，请查看本地版本) |1.用户 1：创建客户端项目。<br />2.用户 1：将解决方案添加到源代码管理。<br />3.用户 2：将解决方案从源代码管理打开到另一个位置。<br />4.用户 2：签出文件。<br />5.用户 2：修改文件。<br />6.用户 2：签入文件。<br />7.用户 1：签出文件的本地版本 (选中"签出"对话框中的"签出本地版本"高级) 。 |签出文件的本地版本。<br /><br /> 用户 2 所做的修改不会应用于用户 1 文件。|

### <a name="case-3b-disconnected-check-out"></a>案例 3b：已断开连接签出

在断开连接模式下操作允许用户在未直接附加到版本存储时获得一定级别的持续源代码管理支持。 为此，请在本地缓存有关登记的解决方案和项目的所有相关信息。

独占签出操作只能在连接到源代码管理存储时发生。 共享签出操作随时可能发生，无论是已连接还是已断开连接。 因此，从版本存储断开连接时，仅启用"签出共享 (COS) 命令。 断开连接时 **，将** 禁用撤消签出，因为无法检索旧版本来替换用户所做的更改。

当用户重新连接到版本存储时，将同步所有登记的解决方案和项目的签出状态。 这会为用户执行的签出对存储执行必要的更新。 发生同步后，用户能够在连接后继续 (正常) 。

#### <a name="expected-behavior"></a>预期行为

- 无法从 **版本存储断开连接** 时使用"以独占方式签出"命令。

- 无法从 **版本存储** 断开连接时使用"撤消签出"命令。

- **共享签出命令** 有效。

|操作|测试步骤|要验证的预期结果|
|------------|----------------|--------------------------------|
|断开连接时，签出文件，然后连接进行同步|1.使用"更改源代码管理"对话框断开受控项目 (**文件**、源代码 **管理**、 **更改源代码管理**) 。<br />2.签出文件。<br />3.单击" (") 对话框中的"断开连接"。<br />4.编辑文件。<br />5.连接"更改源代码管理"对话框。<br />6.获取已编辑文件的最新版本。|常见预期行为|

### <a name="case-3c-query-editquery-save-qeqs"></a>案例 3c：查询编辑/查询保存 (QEQS)
 源代码管理下的项会跟踪编辑、更改和保存，以帮助用户轻松管理其文件。 编辑"签入"的受控项时，QEQS 会截获尝试的编辑，并询问用户是否要签出文件进行编辑。 根据 **"工具**"、"选项"设置，用户必须签出文件才能编辑，或者可能允许用户在内存中编辑副本并稍后签出。  如果用户的 **"工具**"（"选项"设置）未设置为显示签出对话框并直接签出，那么在用户进行编辑时，文件会尽可能自动签出。

#### <a name="expected-behavior"></a>预期行为

- 执行签出操作后，目标 (和) 和/或文件夹 (在) 存储中标记为已签出。

- 版本存储将签出属性给正确的用户。

- 根据用户的设置，签出的时间和日期 (正确的) 。

- 目标文件或文件夹的本地副本是可写的。

|操作|测试步骤|要验证的预期结果|
|------------|----------------|--------------------------------|
|编辑签入的文本文件|1.创建包含文本文件的新项目。<br />2.将解决方案添加到源代码管理。<br />3.将 **"工具"、"****选项****"、"源代码** 管理"和"允许在磁盘上只读时 **编辑文件"** 设置为未选中状态。<br />4.设置 **"工具****"，"选项**"，"**源代码** 管理"，"在编辑签入文件时提示 **签出"组合** 框。 <br />5.设置 **"工具****"，"选项**"，"**源代码** 管理"，"签入文件保存时提示签出 **"组合** 框。 <br />6.在编辑器中打开文本文件，尝试在文件中键入新文本。 如果此步骤成功，请继续执行下一步。<br />7.单击 **"** 签出以 **编辑"对话框中的"** 取消"。 如果此步骤成功，请继续执行下一步。<br />8.设置 **"工具****"，"选项****"，"源代码** 管理 **"，"** 允许在磁盘上只读时编辑文件"以选中。<br />9.在编辑器中打开项目文件，尝试在文件中键入新文本。 如果此步骤成功，请继续执行下一步。<br />10.单击 **"签出** 以 **编辑"对话框中的"** 编辑"。 如果此步骤成功，请继续执行下一步。<br />11.编辑文本文件并尝试保存它。|`Result of step 6:`<br /><br /> 将出现"编辑"对话框。<br /><br /> `Result of step 7:`<br /><br /> 文件保持不变。<br /><br /> `Result of step 9:`<br /><br /> 将出现"编辑"对话框。<br /><br /> `Result of step 10:`<br /><br /> 可以在内存中编辑项目文件。<br /><br /> `Result of step 11:`<br /><br /> 保存时，将显示"保存时签出"对话框。|
|编辑签入的解决方案文件|重复上述测试中所述的步骤，但不要修改文本文件，而是通过更改解决方案属性来修改解决方案。|与上一测试相同|
|编辑签入的项目文件|重复上述测试中所述的步骤，但不要修改文本文件，而是通过更改项目属性来修改项目。|与上一个测试相同。|

### <a name="case-3d-silent-check-out"></a>案例 3d：无提示签出
 此子区域涵盖未按用户的"工具"、"选项"和"源代码管理"设置显示"签出 **"对话框的签出方案**。  

#### <a name="expected-behavior"></a>预期行为

- 签出操作后，目标 (和/) 文件夹 () 在版本存储中标记为已签出。

- 版本存储将签出属性给正确的用户。

- 根据用户的设置和设置， (的签出时间和日期) 。

- 目标文件或文件夹的本地副本是可写的。

|操作|测试步骤|要验证的预期结果|
|------------|----------------|--------------------------------|
|文件的无提示签出|1.将 **"工具"、"****选项"和****"源代码管理**"设置为在编辑 **时自动签出文件**。<br />2.使用 文件创建新项目。<br />3.将解决方案添加到源代码管理。<br />4.签出文件。|文件以无提示方式签出 (UI) 。|
|项目的无提示签出|1.将 **"工具"、"****选项"和****"源代码管理**"设置为在编辑 **时自动签出文件**。<br />2.创建新项目。<br />3.将解决方案添加到源代码管理。<br />4.查看项目。|文件以无提示方式签出 (UI) 。|

### <a name="case-3e-undo-check-out"></a>案例 3e：撤消签出
 **撤消签出** 用于取消文件的签出状态，并避免签入对文件所做的更改。

#### <a name="expected-behavior"></a>预期行为

- 默认值基于用户的"签出本地 **版本"** 设置。 如果用户已选择签出本地版本，则撤消签出的默认值是始终还原到签出的版本。

- 接受撤消后，系统解决方案资源管理器受影响的文件更新图标，并且该项将从"挂起的 **签入**"窗口中删除。

|操作|测试步骤|要验证的预期结果|
|------------|----------------|--------------------------------|
|撤消签出以独占方式签出的单个文件|1.创建客户端项目。<br />2.将解决方案添加到源代码管理。<br />3.以独占方式签出文件。<br />4.修改文件。<br />5.撤消签出 **(文件、****源代码管理、****撤消签出) 。**|常见预期行为。|
|撤消签出已签出的共享单个文件|1.创建客户端项目。<br />2.将解决方案添加到源代码管理。<br />3.签出共享的文件。<br />4.修改文件。<br />5.撤消签出 **(文件、****源代码管理、****撤消签出) 。**|常见预期行为。|
|将文件添加到项目后撤消 () 签出|1.创建新项目并将其添加到源代码管理。<br />2.查看项目。<br />3.向项目添加文件。<br />4.撤消项目的签出。|添加的文件将从项目中删除解决方案资源管理器。<br /><br /> Project不再签出。|
|从项目中删除文件后撤消 () 签出|1.创建新项目并将其添加到源代码管理。<br />2.查看项目。<br />3.从项目中删除文件。<br />4.撤消项目的签出。|已删除的文件将显示在项目下，解决方案资源管理器。<br /><br /> Project不再签出。|

## <a name="see-also"></a>请参阅
- [源代码管理插件的测试指南](../../extensibility/internals/test-guide-for-source-control-plug-ins.md)
