---
title: Manifest from Resources |Microsoft Docs
description: 了解如何使用 Manifest from Resources 工具将 .png 或 .xaml 文件添加到 .imagemanifest 文件，以与 Visual Studio 服务一起使用。
ms.custom: SEO-VS-2020
ms.date: 11/04/2016
ms.topic: reference
ms.assetid: 0234109b-5dcb-4d9d-acb9-a63f8bd5699c
author: leslierichardson95
ms.author: lerich
manager: jmartens
ms.technology: vs-ide-sdk
ms.workload:
- vssdk
ms.openlocfilehash: f750f61532c3e9c6491698c3d936848243d4979a
ms.sourcegitcommit: 68897da7d74c31ae1ebf5d47c7b5ddc9b108265b
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/13/2021
ms.locfileid: "122069674"
---
# <a name="manifest-from-resources"></a>Manifest from Resources
Manifest from Resources 工具是一个控制台应用程序，它采用图像资源列表 (.png 或 .xaml 文件) 并生成一个 .imagemanifest 文件，该文件允许这些图像与 Visual Studio 映像服务一起使用。 此外，此工具还可用于将图像添加到现有 .imagemanifest。 此工具可用于向扩展插件添加对图像的高 DPI 和Visual Studio支持。 生成的 .imagemanifest 文件应包含在 中，并部署为 Visual Studio.vsix (.vsix) 。

## <a name="how-to-use-the-tool"></a>如何使用工具
 **语法**

 ManifestFromResources /resources： \<Dir1> ; \<Img1> /assembly： \<AssemblyName>\<Optional Args>

 **参数**

|**交换机名称**|**备注**|**必需或可选**|
|-|-|-|
|/resources|以分号分隔的图像或目录列表。 此列表应始终包含清单中将包含的图像的完整列表。 如果只提供部分列表，则不包括的条目将丢失。<br /><br /> 如果给定的资源文件是一个图像条带，该工具会先将该文件拆分为单独的图像，然后再将每个子映像添加到清单。<br /><br /> 如果图像是.png，建议设置名称的格式，以便该工具可以填充图像正确的属性 \<Name> \<Width> \<Height> ：...png。|必需|
|/assembly|托管程序集的名称 (不包括扩展) ，也不包括托管资源的本机程序集的运行时 (相对于清单的运行时位置) 。|必需|
|/manifest|要赋予生成的 .imagemanifest 文件的名称。 这还可以包括一个绝对路径或相对路径，以在不同的位置创建文件。 默认名称与程序集名称匹配。<br /><br /> 默认值 \<Current Directory> \\ ：<\> 程序集 .imagemanifest|可选|
|/guidName|要为生成的清单中所有图像的 GUID 符号提供的名称。<br /><br /> 默认值：AssetsGuid|可选|
|/rootPath|在创建托管资源 URI 之前需要去除的根路径。  (此标志有助于处理工具获取相对 URI 路径错误，导致资源无法加载的情况。) <br /><br /> 默认：\<Current Directory>|可选|
|/recursive|设置此标志会告知工具以递归方式搜索 /resources 参数中任何目录。 省略此标志将导致对目录进行仅顶级搜索。|可选|
|/isNative|当程序集参数是本机程序集的路径时，设置此标志。 当程序集参数是托管程序集的名称时，请省略此标志。  (有关此标志的其他信息，请参阅 Notes 部分) |可选|
|/newGuids|设置此标志会告知工具为图像的 GUID 符号创建新值，而不是合并现有清单中的 GUID 符号。|可选|
|/newIds|设置此标志会告知工具为每个图像创建新的 ID 符号值，而不是合并现有清单中的值。|可选|
|/noLogo|设置此标志会阻止打印产品和版权信息。|可选|
|/?|打印出"帮助信息"。|可选|
|/help|打印出"帮助信息"。|可选|

 **示例**

- ManifestFromResources /resources：D：\Images /assembly：My.Assembly.Name /isNative

- ManifestFromResources /resources:D:\Images\Image1.png;D：\Images\Image1.xaml /assembly：My.Assembly.Name /manifest：MyImageManifest.imagemanifest

- ManifestFromResources /resources:D:\Images\Image1.png;D：\Images\Image1.xaml /assembly：My.Assembly.Name /guidName：MyImages /newGuids /newIds

## <a name="notes"></a>说明

- 该工具仅支持.png .xaml 文件。 将忽略任何其他图像或文件类型。 分析资源时遇到的所有不受支持类型均会生成警告。 如果在工具完成资源分析后找不到受支持的映像，将生成错误

- 通过遵循 .png 图像的建议格式，该工具将 .png 的大小/维度值设置为指定格式的大小，即使它不同于图像的实际大小。

- 对于图像，可以省略宽度/高度.png，但该工具将读取图像的实际宽度/高度，并使用这些格式作为图像的大小/维度值。

- 针对同一 .imagemanifest 多次在同一映像条上运行此工具将导致重复的清单条目，因为该工具尝试将映像条拆分为独立映像，并将其添加到现有清单。

- 只 (生成的清单来合并省略 /newGuids 或 /newIds) 。 通过其他方式自定义或生成的清单可能无法正确合并。

- 生成后，可能需要手动编辑为本机程序集生成的清单，使 ID 符号与本机程序集的 .rc 文件中的资源 ID 匹配。

## <a name="sample-output"></a>示例输出
 **简单映像清单**

 映像清单将类似于以下.xml文件：

```xml
<?xml version="1.0" encoding="utf-8"?>
<!-- This file was generated by the ManifestFromResources tool.-->
<!-- Version: 14.0.15197 -->
<ImageManifest xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://schemas.microsoft.com/VisualStudio/ImageManifestSchema/2014">
  <Symbols>
    <String Name="Resources" Value="/My.Assembly.Name;Component/Resources/Images" />
    <Guid Name="AssetsGuid" Value="{fb41b7ef-6587-480c-aa27-5b559d42cfc9}" />
    <ID Name="MyImage" Value="0" />
  </Symbols>
  <Images>
    <Image Guid="$(AssetsGuid)" ID="$(MyImage)">
      <Source Uri="$(Resources)/Xaml/MyImage.xaml" />
      <Source Uri="$(Resources)/Png/MyImage.16.16.png">
        <Size Value="16" />
      </Source>
    </Image>
  </Images>
  <ImageLists />
</ImageManifest>
```

 **映像条的映像清单**

 映像条的映像清单将类似于以下.xml文件：

```xml
<?xml version="1.0" encoding="utf-8"?>
<!-- This file was generated by the ManifestFromResources tool.-->
<!-- Version: 14.0.15197 -->
<ImageManifest xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://schemas.microsoft.com/VisualStudio/ImageManifestSchema/2014">
  <Symbols>
    <String Name="Resources" Value="/My.Assembly.Name;Component/Resources/ImageStrip" />
    <Guid Name="AssetsGuid" Value="{fb41b7ef-6587-480c-aa27-5b559d42cfc9}" />
    <ID Name="MyImageStrip_0" Value="1" />
    <ID Name="MyImageStrip_1" Value="2" />
    <ID Name="MyImageStrip" Value="3" />
  </Symbols>
  <Images>
    <Image Guid="$(AssetsGuid)" ID="$(MyImageStrip_0)">
      <Source Uri="$(Resources)/MyImageStrip_0.png">
        <Size Value="16" />
      </Source>
    </Image>
    <Image Guid="$(AssetsGuid)" ID="$(MyImageStrip_1)">
      <Source Uri="$(Resources)/MyImageStrip_1.png">
        <Size Value="16" />
      </Source>
    </Image>
  </Images>
  <ImageLists>
    <ImageList Guid="$(AssetsGuid)" ID="$(MyImageStrip)">
      <ContainedImage Guid="$(AssetsGuid)" ID="$(MyImageStrip_0)" />
      <ContainedImage Guid="$(AssetsGuid)" ID="$(MyImageStrip_1)" />
    </ImageList>
  </ImageLists>
</ImageManifest>
```

 **本机程序集映像资源的映像清单**

 本机映像的映像清单将类似于以下.xml文件：

```xml
<?xml version="1.0" encoding="utf-8"?>
<!-- This file was generated by the ManifestFromResources tool.-->
<!-- Version: 14.0.15198 -->
<ImageManifest xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://schemas.microsoft.com/VisualStudio/ImageManifestSchema/2014">
  <Symbols>
    <String Name="Resources" Value="..\Assembly\Folder\My.Assembly.Name" />
    <Guid Name="AssetsGuid" Value="{442d8739-efde-46a4-8f29-e3a1e5e7f8b4}" />
    <ID Name="MyImage1" Value="0" />
    <ID Name="MyImage2" Value="1" />
  </Symbols>
  <Images>
    <Image Guid="$(AssetsGuid)" ID="$(MyImage1)">
      <Source Uri="$(Resources)">
        <Size Value="16" />
        <NativeResource ID="$(MyImage1)" Type="PNG" />
      </Source>
    </Image>
    <Image Guid="$(AssetsGuid)" ID="$(MyImage2)">
      <Source Uri="$(Resources)">
        <Size Value="16" />
        <NativeResource ID="$(MyImage2)" Type="PNG" />
      </Source>
    </Image>
  </Images>
  <ImageLists />
</ImageManifest>
```
