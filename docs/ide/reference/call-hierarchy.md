---
title: 查找对方法的调用
description: 了解如何使用“调用层次结构”窗口在选定方法、属性或构造函数间导航所有调用方和被调用方（有时）。
ms.custom: SEO-VS-2020
ms.date: 05/18/2018
ms.topic: reference
f1_keywords:
- VS.CallHierarchy
helpviewer_keywords:
- Call Hierarchy
author: TerryGLee
ms.author: tglee
manager: jmartens
ms.technology: vs-ide-general
ms.workload:
- multiple
ms.openlocfilehash: e4e439e945e60a2824b4a3c694dd048be248c757
ms.sourcegitcommit: 68897da7d74c31ae1ebf5d47c7b5ddc9b108265b
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/13/2021
ms.locfileid: "122151803"
---
# <a name="view-call-hierarchy"></a>查看调用层次结构

通过查看代码的调用层次结构，可以在选定方法、属性或构造函数间导航所有调用方和被调用方（有时）。 这有助于更好地理解代码的流动方式，以及评估代码更改的效果。 可以检查多个级别的代码，以查看方法调用的复杂链条以及代码的其他入口点。 这使你能够找到所有可能的执行路径。

在 Visual Studio 中，可以在设计时查看调用层次结构。 这意味着，你无须设置断点并启动调试器以查看运行时调用堆栈。

## <a name="use-the-call-hierarchy-window"></a>使用“调用层次结构”窗口

若要显示“调用层次结构”窗口，请在代码编辑器中右键单击某个方法、属性或构造函数调用的名称，然后选择“查看调用层次结构”。

成员名称会显示在“调用层次结构”窗口的树状视图窗格中。 如果展开成员节点，则会显示“调用方”**成员名称** ，对于 C++，则会显示“被调用方”**成员名称** 子节点。

对于 C++ 代码，可以看到某个成员的调用方和被调用方：

![Visual Studio 中 C++ 代码的调用层次结构](media/call-hierarchy-cpp.png)

对于 C# 和 Visual Basic 代码，可以查看某个成员的调用方，但不能查看其被调用方：

![Visual Studio 中 C# 代码的调用层次结构](media/call-hierarchy-csharp.png)

- 如果展开“调用方”节点，则显示调用选定成员的所有成员。

- 对于 C++，如果展开“被调用方”节点，则显示选定成员调用的所有成员。

然后，可以展开每个调用成员来查看其“调用方”，对于 C++，则可以查看“被调用方”节点。 这样就可以在调用方的堆栈中导航，如下图所示：

![调用层次结构窗口具有多个展开级别](media/call-hierarchy-csharp-expanded.png)

对于定义为虚拟或抽象成员的成员，会显示一个“重写方法名”节点。 针对接口成员，显示的是“实现方法名”节点。 这些可展开的节点与“调用方”和“被调用方”节点显示在同一级。

工具栏上的“搜索范围”框包含“我的解决方案”、“当前项目”和“当前文档”选项。

在“调用层次结构”树状视图窗格中选择某个子成员时：

- “调用层次结构”详细信息窗格会显示在其中从父成员调用子成员的所有代码行。

- “代码定义”窗口（如果打开）显示选定成员的代码（仅限 C++）。 有关此窗口的详细信息，请参阅[查看代码的结构](../../ide/viewing-the-structure-of-code.md)。

> [!NOTE]
> 调用层次结构功能不会查找方法组引用，这些引用包含将方法添加为事件处理程序或将方法分配给委托的位置。 若要查找对方法的所有引用，可以使用“查找所有引用”命令。

## <a name="shortcut-menu-items"></a>快捷菜单项

下表描述了在树状视图窗格中右键单击某个节点时，可以使用的多个快捷菜单选项。

|上下文菜单项|说明|
| - |-----------------|
|**作为新根添加**|将选定节点添加为树状视图窗格中的新根节点。 这样就可以集中关注特定子树。|
|**移除根**|从树视图窗格中删除所选根节点。 只有根节点有此选项。<br /><br /> 还可以使用“移除根”工具栏按钮来移除选定的根节点。|
|**转到定义**|在选定节点上运行“转到定义”命令。 这会导航到成员调用的原始定义或变量定义。<br /><br /> 若要运行“转到定义”命令，还可以双击选定节点或在选定节点上按 F12。|
|**查找所有引用**|在选定节点上运行“查找所有引用”命令。 这会在项目中查找所有引用某个类或成员的代码行。<br /><br /> 还可以使用 Shift+F12 在选定节点上运行“查找所有引用”命令。|
|**Copy**|复制选定节点（但不包含其子节点）的内容。|
|**刷新**|折叠选定节点，重新展开它后便可显示最新的信息。|
