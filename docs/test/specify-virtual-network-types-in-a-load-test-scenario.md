---
title: 指定虚拟网络类型（负载测试）
description: 了解如何使用网络组合，更逼真地模拟最终用户与应用程序交互的方式。
ms.custom: SEO-VS-2020
ms.date: 10/19/2016
ms.topic: how-to
helpviewer_keywords:
- load tests, scenarios
- load tests, adding networks
- load tests, removing networks
- load tests, virtual networks
- network mix
ms.assetid: 3c4f7874-081a-4ec4-9510-4d6d7d863a11
author: mikejo5000
ms.author: mikejo
manager: jmartens
ms.technology: vs-ide-test
ms.openlocfilehash: 829272d73792e1b9c6d6e61b653ab85c78ca0508
ms.sourcegitcommit: b12a38744db371d2894769ecf305585f9577792f
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/13/2021
ms.locfileid: "126641414"
---
# <a name="specify-virtual-network-types-in-a-load-test-scenario"></a>在负载测试方案中指定虚拟网络类型

“网络组合”提供了一种在负载测试方案中更真实地模拟负载的方法  。 负载是使用不同种类的网络类型组合生成的，而不仅仅是一种单一的网络类型。 这样可以更逼真地模拟最终用户与应用程序交互的方式。

网络组合指定虚拟用户运行特定网络配置文件的概率  。 网络配置是在应用层对网络带宽的一种模拟， 但它不模拟网络延迟。

在创建负载测试时，可能希望模拟通过多种类型的网络连接产生的负载的情况。 网络组合提供了几种网络类型。 模拟不同的网络。 如果选择其中某个选项（如 `Cable-DSL 1.5Mbps`），便会在测试中注入等待时间以模拟所选的网络带宽。

网络组合的工作方式类似于其他组合选项。 根据网络组合，与虚拟用户关联的网络类型是随机选取的。 根据在组合中指定的概率，使用特定的网络类型运行该用户的测试。

指定网络组合之后，可以添加和移除网络类型。 还可以使用组合控件来更改网络组合的分布。

利用混合控件，你可以轻松地调整方案中网络的分布。

有关详细信息，请参阅[关于混合控件](../test/specify-virtual-network-types-in-a-load-test-scenario.md)。

[!INCLUDE [web-load-test-deprecated](includes/web-load-test-deprecated.md)]

## <a name="true-network-emulation"></a>真实网络仿真

Visual Studio 对所有测试类型（包括负载测试）使用基于软件的真实网络仿真。 真实网络仿真通过直接操作网络数据包来模拟各种网络情况。 真实网络仿真程序通过使用可靠的物理链接（如以太网）可模拟有线和无线网络的行为。 下列网络特性加入到了真实网络仿真中：

- 通过网络的往返时间（延迟）

- 可用带宽量

- 排队行为

- 数据包丢失

- 数据包的重新排序

- 错误传播。

真实网络仿真还提供在基于 IP 地址或协议（如 TCP、UDP 和 ICMP）筛选网络数据包方面的灵活性。

基于网络的应用程序开发人员和测试人员可以使用真实网络仿真来模拟所需的测试环境，评估性能，预测更改的影响或做出有关技术优化的决策。 与硬件测试台相比，真实网络仿真是一个更廉价、更灵活的解决方案。

## <a name="to-add-new-networks-to-a-scenario"></a>向方案中添加新网络

1. 在为方案指定网络组合的过程中，请选择“添加”  。

     新的网络项即添加到网格中。

    > [!NOTE]
    > 若要显示“编辑网络组合”对话框，请右键单击现有方案，然后选择“编辑网络组合”   。

2. 在“网络类型”列中，选择箭头来添加新项  。 选择所需的网络类型。

3. （可选）调整混合控件以指定测试分布。 有关详细信息，请参阅[关于混合控件](../test/specify-virtual-network-types-in-a-load-test-scenario.md)。

4. 完成网络的添加后，选择“确定”  。

## <a name="to-remove-networks-from-a-scenario"></a>从方案中移除网络

1. 打开一个负载测试。

2. 右键单击要从中移除网络的方案，然后选择“编辑网络组合”  。 随即出现“编辑网络组合”对话框  。

3. 在网格中选择网络，然后选择“移除”  。

4. （可选）调整混合控件以指定测试分布。 有关详细信息，请参阅[关于混合控件](../test/specify-virtual-network-types-in-a-load-test-scenario.md)。

5. 完成网络的移除之后，选择“确定”  。

## <a name="about-the-mix-control"></a>关于混合控件

利用混合控件，你可以调整负载在负载测试方案中的测试、浏览器类型或网络类型之间分布的百分比。 若要调整此百分比值，请移动滑块。 调整网络类型的组合将指定虚拟用户在负载测试方案中运行特定网络配置文件的概率。

移动滑块时，所有可用项的百分比值都会发生变化。 如果移动两个以上的项，则添加或移除的量在其他项中均匀分布。 可以重写此行为。 对于某个特定项，如果选中锁定列中的复选框，则将锁定该项的指定百分比值。 随后移动滑块时，添加或移除的量只能应用于其余所有取消锁定的项。

“分布”按钮将用于在所有项之间平均分配百分比值  。 例如，如果有三个项，则选择“分布”会将百分比值设置为 34、33 和 33  。

> [!WARNING]
> “分布”按钮会重写任意锁定的项  。

还可以不使用滑块而直接在“%”列中键入百分比值。 如果直接输入百分比值，则其他项将不会自动调整。

> [!NOTE]
> 当总数达不到 100% 或者在“%”列中输入的百分比值为小数时，滑块处于禁用状态。

手动输入百分比值时，应该确保所有项的总和为 100%。 保存组合时，如果总和不是 100%，则系统将提示你是接受现有的百分比值，还是返回并调整百分比值。 如果选择接受现有百分比，则会按比例分配这些百分比以达到 100%。  例如，如果有两个项，并且手动将它们设置为 80% 和 40%，则第一个项将设置为 66.67%（80 除以 120），第二个项将设置为 33.33%（40 除以 120）。
